(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,i){},17:function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=(i(15),i(2)),h=i(3),c=i(7),l=i(6),d=i(8),u=i(1),f=function(e){var t=e.width-2,i=t-6;return o.a.createElement("g",null,o.a.createElement("rect",{x:e.x,y:e.y,width:t,height:t,fill:"white",stroke:e.color,strokeWidth:2}),o.a.createElement("rect",{x:1*e.x+3,y:1*e.y+3,width:i,height:i,fill:e.color}))},g=function(e){for(var t=[],i=0;i<e.numRows;i++)t.push(o.a.createElement(f,{key:i,x:e.x,y:1*e.y+(1*e.width+1*e.disanceY)*i,width:e.width,color:e.colors[i]}));return o.a.createElement("g",null,t)},w=function(e){var t=e.colors.map(function(e,t){return o.a.createElement(g,{key:t,x:10+23*t,y:10,width:20,disanceY:3,numRows:e.length,colors:e})});return o.a.createElement("g",null,t)},k=function(){function e(){Object(s.a)(this,e),this.initGame()}return Object(h.a)(e,[{key:"initGame",value:function(){this.width=30,this.height=15;var e=Math.floor((this.height-1)/2),t=Math.floor((this.width-1)/2);this.snake=[[t-1,e],[t,e],[t+1,e]],this.snakeDirection="right",this.eatenFood=[],this.initFood(),this.updateField(),this.timeStamp=performance.now()}},{key:"initFood",value:function(){this.food=[[Math.floor(Math.random()*this.width),Math.floor(Math.random()*this.height)]],console.log(Math.floor(Math.random()*this.height))}},{key:"initStartEmptyField",value:function(){for(var e=[],t=0;t<this.width;t++)e.push(new Array(this.height).fill(0));this.field=e}},{key:"next",value:function(){var e=performance.now();e>this.timeStamp+100&&(this.timeStamp=e,this.updateField())}},{key:"updateField",value:function(){this.initStartEmptyField(),this.updateSnake(),this.addObjectOnField(this.food),this.addObjectOnField(this.snake)}},{key:"addObjectOnField",value:function(e){for(var t=this.field,i=0;i<e.length;i++)t[e[i][0]][e[i][1]]=1;this.field=t}},{key:"updateSnake",value:function(){var e=this.snake.slice(),t=this.calcNewSnakeHead();if(this.isInSnake(t))this.gameOver();else{if(this.food.length>0){var i=this.food[0];t[0]===i[0]&&t[1]===i[1]&&(this.eatenFood.push(this.food.shift()),this.initFood())}var n=!1;if(this.eatenFood.length>0){var o=this.eatenFood[0];(n=o[0]===e[0][0]&&o[1]===e[0][1])&&this.eatenFood.shift()}e.push(t),this.snake=e.slice(n?0:1)}}},{key:"calcNewSnakeHead",value:function(){var e=this.snake[this.snake.length-1],t=e.slice();return"right"===this.snakeDirection&&(t[0]=(e[0]+1)%this.width),"left"===this.snakeDirection&&(t[0]=(e[0]-1+this.width)%this.width),"down"===this.snakeDirection&&(t[1]=(e[1]+1)%this.height),"up"===this.snakeDirection&&(t[1]=(e[1]-1+this.height)%this.height),t}},{key:"isInSnake",value:function(e){for(var t=0;t<this.snake.length;t++)if(this.snake[t][0]===e[0]&&this.snake[t][1]===e[1])return!0;return!1}},{key:"gameOver",value:function(){this.initGame()}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"field",get:function(){return this._field.slice()},set:function(e){this._field=e}},{key:"snakeDirection",get:function(){return this._snakeDirection},set:function(e){-1!==["up","down","left","right"].indexOf(e)&&(this._snakeDirection=e)}}]),e}(),v=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).conunter=0,e.drowField=e.drowField.bind(Object(u.a)(Object(u.a)(e))),e.onKeyPressed=e.onKeyPressed.bind(Object(u.a)(Object(u.a)(e))),e.game=new k,e.activeColor="#111",e.passiveColor="#ddd",document.addEventListener("keydown",e.onKeyPressed.bind(Object(u.a)(Object(u.a)(e))));var i=e.game.field,n=e.drowField(i);return e.state={colors:n},e}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;requestAnimationFrame(function i(){t.game.next();var n=t.drowField(e.game.field);t.setState({colors:n}),requestAnimationFrame(i)})}},{key:"render",value:function(){return o.a.createElement("svg",{width:"1000",height:"400",version:"1.1",viewBox:"0 0 1000 400",preserveAspectRatio:"none"},o.a.createElement(w,{colors:this.state.colors}))}},{key:"drowField",value:function(e){for(var t=[],i=0;i<this.game.width;i++){for(var n=[],o=0;o<this.game.height;o++)n.push(e[i][o]>=1?this.activeColor:this.passiveColor);t.push(n)}return t}},{key:"onKeyPressed",value:function(e){switch(e.code){case"ArrowUp":this.game.snakeDirection="up";break;case"ArrowDown":this.game.snakeDirection="down";break;case"ArrowLeft":this.game.snakeDirection="left";break;case"ArrowRight":this.game.snakeDirection="right"}}}]),t}(n.Component),m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(v,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/snake",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/snake","/service-worker.js");m?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):p(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):p(e)})}}()},9:function(e,t,i){e.exports=i(17)}},[[9,2,1]]]);
//# sourceMappingURL=main.8c67fda4.chunk.js.map